Ayane comes with pre-loaded instruments you can inspect and edit.
It is recommended to tweak them for your chiptunes. For instance most syncbuzzer exemples would benifit a proper attack.

To edit an instrument or create a new one (from 01 to 99), select it via CONTROL-I and arrows, then ENTER.
The following shortcuts are handled but deprecated.
* CONTROL-f3 (go to instrument editor -- starkos)
* f5/f8 (previous/next instrument -- Soundtrakker)

# Keys/shortcut

* Navigation
 * Cursor keys to navigate
 * CONTROL-Cursor keys to navigate faster
 * CONTROL-f0: First row
 * CONTROL-f.: Last row
* Edition
 * /!\ All values (except volume and hard env type) are decimal.
 * /!\ Numeric pad is not operational!
 * Space to toggle flip-flops
 * ENTER to insert a row
 * CONTROL-DEL to delete a row

# Instrument table description

An instrument consists of rows, one row per tick.
Each column has a dedicated role:

## Loop
Indicate the looping row after last row is reached.
If no loop is set, the instrument stop playing after the last row.

## Tone
Flip/flop. Set by default to generate the AY square tone.
Clearing it is usefull to play pure noise, pure hard env or timer fx alone.

## Volume
The AY volume in hexadecimal, for 0 (mute) to F (max).
Automatically disabled when hard env or sync-buzzer is used.

## Arp
Shift in semitone, from -64 to 63.
/!\ Only affects the AY square tone.
The calculated note is then smartly clipped. E.g.:
* C-1 -5 gives G-0 as expected
* C-0 -5 gives G-0 as well (respect the target note, but in available octave range).   

## Pitch
Shift in 1/16 of period. From -9999 to 9999.
/!\ Use 16 to 
Only affects the AY square tone.
A negative value will pitch down (internally, AY period is increased).
A positive value will pitch up (internally, AY period is decreased).
/!\ No clipped done here! (TODO)

## Noise
Consist of a flag and a value.
* . -  No noise
* . n  No noise, but change R6 for side effect (expert)
* x 0  Noise, don't change R6  (expert)
* x n  Noise n 

Typically when you want noise, you'll use the last combination. By the way the flag is automaticaly set when you change the value, for this very reason.

## Hard envelope type
Let you modulate the volume / create special sounds.
Instead of specifying the volume at each tick, you might control it via an envelope (sawtooth, triangle...). That's the original purpose of the "Envelope Generator Control" AY register.
Yet for chiptune tracking on Amstrad, Atari, MSX, Spectrum, and <insert beloved old system here>, it is almost always exploited in another way. Instead of letting the envelope run slowly for a progressive change of volume (e.g. period of 3 seconds), it is programmed to run so fast it creates a sound waveform (e.g. period of 4.608 ms corresponding to 217Hz).
This clever usage is dubbed "buzzer" in the Atari Scene.
Since the original purpose was to control volume over long period of time, the unit is 16 times the one used for square tone periods. This implies two things:
* It is 16 times less precise, leading to out-of-tune notes, especially for higher pitches.
* It rarely matches the square tone period, leading to phase-shifting (a very welcomed effect, as it makes the timbre morph through time).

The column let you choose the kind of envelope:
```
0 to 7 Reserved            ____
8 \\\\  9 \___  A \/\/  B \

           ___         
C ////  D /    E /\/\   F /____
```

For the waveform to be audible, you must pick a self-repeating envelope (8, A, C or E).

## Hard envelope arp
To mitigate the low precision, we often transpose hard env at a lower octave (e.g. -12, -24 ...). This is stricly more powerfull than Starkos's `shift` concept. For instance -17 with approximately divide the frequency by 3.
Other values can be chosen for gritty chords and crazy sounds.

## Hard envelope pitch
Due to the low precision, it rarely makes sense to tweak this pitch.
* Values less than 256 will mostly be rounded off.
* Values more than 256 will mostly be out of tune.
If you want to change the dephasing speed, tweak the tone pitch instead.
**Future**: Possibility to set the absolute period (independent of the base note), for Ben Daglish sounds, classical use as volume envelope, or syncbuzzer control.

## Sync buzzer flag
Activate sync buzzer. See [sync buzzer doc](./3.2-timer fx - sync buzzer.md) for the other fields.
