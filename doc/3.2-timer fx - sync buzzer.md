As discussed in [Hard Envelope](./3.1-instrument editor.md#hard-envelope), the hard-env-period isn't accurate enough for high-pitched notes.
This is resolved with the "Synz Buzzer" technic, first introduced by Tao on Atari ST, where we re-trigger the envelope at a precise frequency. On Atari, it is achevied via hardware timer interrupt. On Amstrad CPC the synchronisation must be done purely in software by threading main processes (the player itself and whichever we have to do each frame) with PSG updates (a la "race against the beam"). That makes it challenging to use in a demo, let alone a game.

On top of solving the precision problem, sync-buzzer allows to create a lot of different and dynamic waveforms, while being less CPU hungry than square ring modulation (Sid voices).

**Warning** Since the is only one hard envelope generator, using syncbuzzer on several tracks (or together with classical buzzer) will lead to a weird mix. 

# PlAYing with waveform

To first experiment with sync buzzer, it is recommanded to deactivate tone flag (2nd column). You can always re-activate it later for added complexity.

By default (hard env arp = 0), envelopes 8, 9, A, F (resp. C, D, E, F) will sound the same. That's because only the descending (resp. ascending) ramp is ran before the envelope is re-triggered. To fix that, double the envelope frequency by setting the hard-env-arp (**not the sync buzzer arp**) to +12. We get the following waveforms:
* 8: \\\\\\\\
* 9: \_\_\_\_
* A: \/\/\/\/
* B: \"\"\"\"  

The triangle version is demonstrated in instrument "triangle". And "triangle morph" is a half-convincing try to morph from sawtooth to triangle. 

With a non-repeating envelope (9, B, D, F) and a high value for hard-env-arp, you'll get a short pulse, mimicking "Sid Voices". This is demonstrated in instrument "pseudo-sid".  

# PlAYing with volume

The hard envelope goes all the way from 0 to F, so the only ways to affect the general volume of the classical buzzer effect is to control the dephasing with the tone period, or mix it with a tone period 1 (or 0 which is equivalent). 
With sync buzzer, we can retrigger the envelope before it reaches its maximum amplitude, leading to a quieter sound. 
E.g. when setting `hard-env-apr = -12` and `sync-buzz-arp = 0`, only half the envelope is ran before being retriggered, effectively going from 0 to 7 (or from 15 to 8). Here the volume reached for each arp, where the fractional part indiquate the ratio we stayed at this volume:
*  -1: 15.1
*  -2: 14.3
*  -3: 13.5
*  -4: 12.7
*  -5: 12.0
*  -6: 11.3
*  -7: 10.7
*  -8: 10.1
*  -9:  9.5
* -10:  9.0
* -11:  8.4
* -12:  8.0 
This is demonstrated in instruments "SyncBuzz attack" and "Saw*Square vol X".

# Dual sync buzzer

For now it is only useful with different periods, as otherwise both would be triggered at almost the same time, the second one cancelling the first one.
**Future**: allow phase control.

## Wave morphing

Take for instance:
* Syncbuzz1: Envelope 9, pitch -1
* Syncbuzz2: Envelope D, pitch +1
Depending on the dephasing, we'll morph through these different waveforms:
```
 \_____   (9 triggered just after D, which hasn't time to rise)
 
 /\____

 /`\___

 /``\__   (clipped triangle)

 /```\_

 /````\   (9 triggered before D)
 D    9
```
Due to the interfering nature of the triggers, this does not loop smoothly.

This is demonstrated in instrument "dual sync". Check it with F-4 note!

## Chord

You may also set the two syncbuzz to distinct notes. Once again, the triggers will compete, hence the harmonics created are hard to predict. 
This is demonstrated in instrument "sync chord minor/major" (compare to "sync arp minor/major" where all notes are heard as expected).

# Editor fields

## Sync buzzer env type

Well, that's the same than hard-env-type. Since you can assign one to each sync buzzer (see dual sync buzzer above), the field is moved here. 

## Sync buzzer arp

Applied to base note (the note set in phrase).
/!\ That implies that if you want to do a chord via arpegio, you'll have to copy the tone arp here. You can also leave it as is, but the harmonics produced might overwhelm you.

## Sync buzzer pitch

Applied to base note + sync buzzer arp.
For vibrato (should be copied from tone pitch) or control dephasing speed relative to base tone or other sync buzzer.

